{
    "swagger": "2.0",
    "info": {
        "contact": {}
    },
    "paths": {
        "/users/": {
            "put": {
                "description": "Updates the authenticated user's information",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Update a user",
                "parameters": [
                    {
                        "description": "User update payload",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/commands.UpdateUserCommand"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden: cannot update another user",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    }
                }
            }
        },
        "/users/all": {
            "get": {
                "description": "Returns a list of all registered users",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get all users",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    }
                }
            }
        },
        "/users/countries": {
            "get": {
                "description": "Returns a list of available countries",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "List all countries",
                "responses": {
                    "200": {
                        "description": "List of countries",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetCountriesList"
                        }
                    }
                }
            }
        },
        "/users/country/{country}": {
            "get": {
                "description": "Returns a list of users filtered by country",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get users by country",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Country name",
                        "name": "country",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid country",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    }
                }
            }
        },
        "/users/create": {
            "post": {
                "description": "Creates a new user in the system",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Create a new user",
                "parameters": [
                    {
                        "description": "User creation payload",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/commands.CreateUserCommand"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    }
                }
            }
        },
        "/users/email/{email}": {
            "get": {
                "description": "Returns a single user by email address",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get user by email",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User email",
                        "name": "email",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid email",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    }
                }
            }
        },
        "/users/id/{id}": {
            "get": {
                "description": "Returns a single user by UUID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get user by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid id",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    }
                }
            }
        },
        "/users/language/{language}": {
            "get": {
                "description": "Returns a list of users filtered by language",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get users by language",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Country name",
                        "name": "country",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid country",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    }
                }
            }
        },
        "/users/languages": {
            "get": {
                "description": "Returns a list of available languages",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "List all languages",
                "responses": {
                    "200": {
                        "description": "List of languages",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetLanguagesList"
                        }
                    }
                }
            }
        },
        "/users/like-username/{username}": {
            "get": {
                "description": "Returns a list of users whose usernames match the provided pattern",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get users by partial username",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Username pattern",
                        "name": "username",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid username",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    }
                }
            }
        },
        "/users/list": {
            "get": {
                "description": "Returns all users where deleted_at IS NULL",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Users"
                ],
                "summary": "Get list of active users",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetListUsersDTO"
                        }
                    }
                }
            }
        },
        "/users/login": {
            "post": {
                "description": "Authenticates a user and returns a JWT token",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Login a user",
                "parameters": [
                    {
                        "description": "User login payload",
                        "name": "credentials",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/commands.LoginUserCommand"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User data and token",
                        "schema": {
                            "$ref": "#/definitions/helpers.LoginSuccessResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "401": {
                        "description": "Authentication failed",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    }
                }
            }
        },
        "/users/logout": {
            "post": {
                "description": "Revokes the current JWT token",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Logout user",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Logout successful",
                        "schema": {
                            "$ref": "#/definitions/helpers.LogoutSuccessResponse"
                        }
                    },
                    "401": {
                        "description": "Missing or invalid token",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "500": {
                        "description": "Logout failed",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    }
                }
            }
        },
        "/users/profilepic/{id}": {
            "patch": {
                "description": "Uploads a profile picture for the given user",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Upload a user's profile picture",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "file",
                        "description": "Profile picture file",
                        "name": "profile_pic",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Uploaded file info",
                        "schema": {
                            "$ref": "#/definitions/helpers.LogoutSuccessResponse"
                        }
                    },
                    "400": {
                        "description": "Bad request / missing file",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    }
                }
            }
        },
        "/users/restore/{id}": {
            "patch": {
                "description": "Restores a user by ID that was previously soft-deleted",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Restore a deleted user",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Restored user",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid UUID",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    }
                }
            }
        },
        "/users/username/{username}": {
            "get": {
                "description": "Returns a single user by username",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Get user by username",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Username",
                        "name": "username",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid username",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserDTO"
                        }
                    }
                }
            }
        },
        "/users/{id}": {
            "delete": {
                "description": "Deletes a user by ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Delete a user",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Deleted user",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid UUID",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/helpers.GetUserResponse"
                        }
                    }
                }
            }
        },
        "/verify-email": {
            "get": {
                "description": "Verifies the email of a user using a token",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "Verify user's email",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Verification token",
                        "name": "token",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "303": {
                        "description": "Redirects to login page with verification success"
                    },
                    "400": {
                        "description": "Missing or invalid token",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "commands.CreateUserCommand": {
            "type": "object",
            "properties": {
                "birth": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "gender": {
                    "type": "string"
                },
                "language": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "commands.LoginUserCommand": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "commands.UpdateUserCommand": {
            "type": "object",
            "properties": {
                "birth": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "gender": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "information": {
                    "type": "string"
                },
                "language": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "profile_pic": {
                    "type": "string"
                },
                "user_name": {
                    "type": "string"
                },
                "visibility": {
                    "type": "boolean"
                },
                "web_site": {
                    "type": "string"
                }
            }
        },
        "dto.UserDTO": {
            "type": "object",
            "properties": {
                "birth": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "gender": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "information": {
                    "type": "string"
                },
                "language": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "profilePic": {
                    "type": "string"
                },
                "profilePicURL": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                },
                "visibility": {
                    "type": "boolean"
                },
                "website": {
                    "type": "string"
                }
            }
        },
        "dto.UserResponse": {
            "type": "object",
            "properties": {
                "birth": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "deleted_at": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "gender": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "information": {
                    "type": "string"
                },
                "language": {
                    "type": "string"
                },
                "last_login_at": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "profilePic": {
                    "type": "string"
                },
                "profilePicURL": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                },
                "visibility": {
                    "type": "boolean"
                },
                "website": {
                    "type": "string"
                }
            }
        },
        "helpers.Error": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string"
                },
                "err": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            }
        },
        "helpers.GetCountriesList": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/shared.Country"
                    }
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "helpers.GetLanguagesList": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/shared.Language"
                    }
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "helpers.GetListUsersDTO": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.UserDTO"
                    }
                },
                "error": {
                    "$ref": "#/definitions/helpers.Error"
                },
                "length": {
                    "type": "integer"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "helpers.GetUserDTO": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.UserDTO"
                    }
                },
                "error": {
                    "$ref": "#/definitions/helpers.Error"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "helpers.GetUserResponse": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.UserResponse"
                    }
                },
                "error": {
                    "$ref": "#/definitions/helpers.Error"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "helpers.LoginSuccessResponse": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "object",
                    "properties": {
                        "token": {
                            "type": "string"
                        },
                        "user": {
                            "$ref": "#/definitions/dto.UserDTO"
                        }
                    }
                },
                "error": {
                    "$ref": "#/definitions/helpers.Error"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "helpers.LogoutSuccessResponse": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "string"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "shared.Country": {
            "type": "string",
            "enum": [
                "CA",
                "MX",
                "US",
                "AR",
                "BO",
                "BR",
                "GB",
                "FR",
                "DE",
                "ES",
                "IT",
                "JP",
                "CN",
                "IN",
                "AU",
                "KR"
            ],
            "x-enum-varnames": [
                "Canada",
                "Mexico",
                "UnitedStates",
                "Argentina",
                "Bolivia",
                "Brazil",
                "UnitedKingdom",
                "France",
                "Germany",
                "Spain",
                "Italy",
                "Japan",
                "China",
                "India",
                "Australia",
                "SouthKorea"
            ]
        },
        "shared.Language": {
            "type": "string",
            "enum": [
                "EN",
                "ES",
                "FR",
                "DE",
                "IT",
                "PT",
                "JA",
                "CH",
                "KO",
                "HI"
            ],
            "x-enum-varnames": [
                "English",
                "Spanish",
                "French",
                "German",
                "Italian",
                "Portuguese",
                "Japanese",
                "Chinese",
                "Korean",
                "Hindi"
            ]
        }
    }
}